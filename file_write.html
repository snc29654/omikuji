<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
  </head>
  <body>

    <label>ファイル書き込みテスト</label>
    <input type="text" id="call" value="初期値" onchange="textchange()" >
    <br />
    <br />
    <div id="message_a"></div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script language="javascript" type="text/javascript">
      // イベントハンドラー
      function textchange() {
        var call = document.getElementById("call").value;

        var message = "";
          message = call.toUpperCase();
        document.getElementById("message_a").innerHTML = message;
        download_txt("test.txt", message);
      }

      // イベントハンドラーを対応付ける
      document.getElementById("call").onchange = textchange;

    

    
    function download_txt(file_name, data) {
    
            const blob = new Blob([data], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            document.body.appendChild(a);
            a.download = file_name;
            a.href = url;
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
    
        }
</script>


</body>
</html>
